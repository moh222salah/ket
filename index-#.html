<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ Ø§Ù„ÙƒÙŠØª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… - ØªØªØ¨Ø¹ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù…Ø²Ø§Ø±Ø¹ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©">
    <meta name="keywords" content="Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª, ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹, Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ, Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©">
    <meta name="author" content="Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ Ø§Ù„ÙƒÙŠØª">
    
    <title>ğŸ¥­ Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ Ø§Ù„ÙƒÙŠØª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… | Ù…ØµØ±</title>

    <meta name="theme-color" content="#2b9348">

  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- Ø®Ø·ÙˆØ· Google - Cairo -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Ù…ÙƒØªØ¨Ø© Font Awesome Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-m6DkX2nYQ9SBBVKHYXQyK1a1vRCbX8gxljSBfn/0F+hX+X58wlJYkq2djHK6TKEJbdA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Ù…ÙƒØªØ¨Ø© Leaflet Ù„Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha512-sA+zGplGMb1ED5RA==" crossorigin="" />

  <!-- Chart.js Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Tailwind CSS Ø¹Ø¨Ø± CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Ù…ÙƒØªØ¨Ø© Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha512-Q6w9vdh==" crossorigin=""></script>

  <!-- Ù…Ù„Ù Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
  <link rel="stylesheet" href="style.css">

<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



    <style>
        body { font-family: 'Tajawal', sans-serif; background: #f4f7fa; color: #1a202c; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn { padding: 10px 15px; border-radius: 8px; font-weight: bold; }
        .btn i { margin-left: 5px; }
        .update-status, .update-indicator, .loading { position: fixed; bottom: 10px; left: 10px; z-index: 999; background: white; padding: 10px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .update-status .status-dot { width: 10px; height: 10px; border-radius: 50%; background: green; display: inline-block; margin-left: 5px; }
        .update-indicator { top: 10px; left: 10px; display: none; }
        .loading { top: 50%; left: 50%; transform: translate(-50%, -50%); display: none; text-align: center; }
        .spinner { width: 30px; height: 30px; border: 4px solid #ccc; border-top: 4px solid #007bff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>


  <!-- Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
  <script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" rel="stylesheet">
    

</script>

  <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø· ÙˆØ§Ù„Ø§ØªØ¬Ø§Ù‡ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© -->
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      direction: rtl;
      background-color: #f9f9f9;
      color: #333;
    }
    html.dark body {
      background-color: #ffffff;
      color: #e0e0e0;
    }
  </style>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #001ea1 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #060e74 0%, #ffffff 100%);
            --success-gradient: linear-gradient(135deg, #ffffff 0%, #101687 100%);
            --warning-gradient: linear-gradient(135deg, #ffffff 0%, #000000 100%);
            --danger-gradient: linear-gradient(135deg, #ffffff 0%, #032f85 100%);
            --search-gradient: linear-gradient(135deg, #ffffff 0%, #18067e 100%);
            --area-gradient: linear-gradient(135deg, #ffffff 0%, #000341 100%);
            --dark-bg: #0a0e1a;
            --darker-bg: #070b15;
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: #ffffff;
            --text-accent: #f9f9f9;
            --shadow-glow: 0 25px 50px rgba(0, 0, 0, 0.4);
            --input-bg: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ù…ØªÙ‚Ø¯Ù…Ø© */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 25%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 85% 75%, rgba(118, 75, 162, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0, 242, 254, 0.05) 0%, transparent 70%),
                linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            animation: backgroundFlow 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundFlow {
            0%, 100% { 
                background-position: 0% 0%, 100% 100%, 50% 50%;
                filter: hue-rotate(0deg);
            }
            50% { 
                background-position: 100% 100%, 0% 0%, 25% 75%;
                filter: hue-rotate(30deg);
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
        .header {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
            padding: 40px 0;
        }

        .main-title {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 900;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            animation: titleGlow 3s ease-in-out infinite alternate;
            text-shadow: 0 0 40px rgba(102, 126, 234, 0.3);
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.4)); }
            to { filter: drop-shadow(0 0 35px rgba(102, 126, 234, 0.7)); }
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            font-weight: 300;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
        .search-section {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .search-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg at 50% 50%, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: rotate 15s linear infinite;
            opacity: 0.7;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .search-content {
            position: relative;
            z-index: 2;
        }

        .search-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            background: var(--search-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 15px 20px;
            background: var(--input-bg);
            border: 2px solid transparent;
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--text-accent);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(0, 242, 254, 0.3);
            transform: translateY(-2px);
        }

        .form-input::placeholder {
            color: var(--text-secondary);
        }

        .search-input-container {
            position: relative;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-accent);
            font-size: 1.2rem;
            pointer-events: none;
        }

        .search-btn {
            background: var(--search-gradient);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .search-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .search-btn:hover::before {
            left: 100%;
        }

        .search-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
        }

        .advanced-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-group {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .filter-group:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
        }

        .range-input {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .range-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--text-accent);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 242, 254, 0.5);
        }

        .range-value {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            color: var(--text-accent);
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .results-section {
            margin: 40px 0;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .results-title {
            font-size: 2rem;
            font-weight: 700;
            background: var(--area-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .results-count {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .sort-options {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .sort-btn {
            background: var(--input-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sort-btn.active,
        .sort-btn:hover {
            background: var(--success-gradient);
            color: white;
            transform: translateY(-2px);
        }

        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .result-card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 30px;
            position: relative;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            cursor: pointer;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .result-card:hover::before {
            left: 100%;
        }

        .result-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-glow);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .mango-info {
            flex: 1;
        }

        .mango-variety {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .mango-scientific-name {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 10px;
        }

        .quality-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quality-excellent {
            background: var(--success-gradient);
            color: white;
            animation: pulse-excellent 3s infinite;
        }

        .quality-good {
            background: var(--warning-gradient);
            color: white;
        }

        .quality-premium {
            background: var(--secondary-gradient);
            color: white;
            animation: pulse-premium 3s infinite;
        }

        @keyframes pulse-excellent {
            0%, 100% { box-shadow: 0 0 0 0 rgba(79, 172, 254, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(79, 172, 254, 0); }
        }

        @keyframes pulse-premium {
            0%, 100% { box-shadow: 0 0 0 0 rgba(240, 147, 251, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(240, 147, 251, 0); }
        }

        .card-content {
            position: relative;
            z-index: 2;
        }

        .location-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .location-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-accent);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .location-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .location-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }

        .location-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .location-value {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1rem;
        }

        .area-highlight {
            color: var(--text-accent) !important;
            font-size: 1.2rem !important;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-accent);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .characteristics {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .characteristics-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .characteristics-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .characteristic-tag {
            background: var(--primary-gradient);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Loading Ùˆ Empty States */
        .loading-container {
            text-align: center;
            padding: 60px 20px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top: 4px solid var(--text-accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--text-secondary);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .statistics-panel {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .statistics-title {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 25px;
            color: var(--text-primary);
        }

        .statistics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .statistic-card {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .statistic-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }

        .statistic-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: var(--area-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .statistic-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-accent);
            margin-bottom: 8px;
        }

        .statistic-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .search-form {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .result-card {
                padding: 20px;
            }
            
            .location-details {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .results-header {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .sort-options {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .ripple-effect {
            position: relative;
            overflow: hidden;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    </style>




    <!-- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ­Ø¯ ÙˆØ§Ù„Ù…Ø­Ø³Ù† -->
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-blue: #00d4ff;
            --accent-green: #00ff88;
            --accent-orange: #ff9800;
            --accent-red: #ff6b6b;
            --dark-bg: #0a0e1a;
            --darker-bg: #060911;
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: #b8c1ec;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.2);
            --shadow-heavy: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            line-height: 1.6;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ù…ØªÙ‚Ø¯Ù…Ø© */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(0, 212, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0, 255, 136, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(102, 126, 234, 0.05) 0%, transparent 50%);
            animation: float-bg 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float-bg {
            0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
            33% { transform: translate(-20px, -30px) rotate(120deg); }
            66% { transform: translate(20px, 15px) rotate(240deg); }
        }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ø·ÙˆØ± */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            padding: 40px 0;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -30%;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.3;
            z-index: -1;
        }

        .main-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 900;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            animation: title-glow 2s ease-in-out infinite alternate;
        }

        @keyframes title-glow {
            from { filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.5)); }
            to { filter: drop-shadow(0 0 20px rgba(0, 255, 136, 0.8)); }
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px var(--shadow-light);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px var(--shadow-medium);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .card:hover::before {
            left: 100%;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            text-decoration: none;
            font-family: inherit;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background: linear-gradient(45deg, var(--success-color), #66bb6a);
        }

        .btn-warning {
            background: linear-gradient(45deg, var(--warning-color), #ffb74d);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger-color), #e57373);
        }

        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .form-input {
            padding: 12px 20px;
            border: 2px solid var(--glass-border);
            border-radius: 15px;
            font-size: 1rem;
            width: 100%;
            outline: none;
            transition: all 0.3s ease;
            background: var(--card-bg);
            color: var(--text-primary);
            font-family: inherit;
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
        }

        .form-input::placeholder {
            color: var(--text-secondary);
        }

        /* Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø±Ù† */
        .flex {
            display: flex;
        }

        .flex-center {
            align-items: center;
            justify-content: center;
        }

        .flex-between {
            justify-content: space-between;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .gap-4 {
            gap: 1rem;
        }

        .gap-6 {
            gap: 1.5rem;
        }

        /* Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø±Ù†Ø© */
        .grid {
            display: grid;
        }

        .grid-auto {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        /* Ø§Ù„Ù…Ø³Ø§ÙØ§Øª */
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }

        /* Ø§Ù„Ù†ØµÙˆØµ */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }

        /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-success { color: var(--success-color); }
        .text-warning { color: var(--warning-color); }
        .text-danger { color: var(--danger-color); }

        /* Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
            50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); }
        }

        /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: var(--accent-blue);
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 212, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 1200px) {
            .container { padding: 15px; }
            .grid-4 { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
            .main-title { font-size: 2rem; }
            .subtitle { font-size: 1rem; }
            .flex { flex-direction: column; }
            .btn { padding: 10px 20px; font-size: 0.9rem; }
        }

        @media (max-width: 480px) {
            .main-title { font-size: 1.8rem; }
            .card { padding: 15px; }
            .btn { padding: 8px 16px; }
        }

        /* ØªØ®ØµÙŠØµØ§Øª Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
        .leaflet-popup-content-wrapper {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            color: var(--text-primary);
            border-radius: 15px;
            border: 1px solid var(--glass-border);
        }

        .leaflet-popup-tip {
            background: var(--card-bg);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø®ØµØµ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
    </style>
</head>




<body>
    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container">
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <header class="header text-center mb-8">
            <h1 class="main-title mb-4">
                <i class="fas fa-seedling text-warning"></i>
                Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ Ø§Ù„ÙƒÙŠØª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
            </h1>
            <p class="subtitle mb-4">
                <i class="fas fa-map-marked-alt text-accent-blue"></i>
                Ø·Ø±ÙŠÙ‚ Ù…ØµØ± Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠ â€¢ Ù…Ù† Ø³ÙÙ†ÙƒØ³ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø­ØªÙ‰ Ø§Ù„Ø¨Ø­ÙŠØ±Ø©
            </p>
            <p class="text-secondary">
                <i class="fas fa-satellite"></i>
                ØªØªØ¨Ø¹ Ù…Ø¨Ø§Ø´Ø± Ø¹Ø¨Ø± Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© ÙˆÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ
            </p>
        </header>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <section class="status-overview mb-8">
            <div class="card">
                <h2 class="text-2xl font-bold mb-6 text-center">
                    <i class="fas fa-chart-pie text-accent-green"></i>
                    Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </h2>
                <div class="grid grid-auto gap-6">
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-map-marker-alt text-accent-blue text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-accent-green" id="totalRegions">847</div>
                        <div class="stat-label text-secondary">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ù†ØªØ¬Ø©</div>
                    </div>
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-check-circle text-success text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-success" id="availableCount">568</div>
                        <div class="stat-label text-secondary">Ù…ØªÙˆÙØ± Ù„Ù„Ø­ØµØ§Ø¯</div>
                    </div>
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-tractor text-warning text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-warning" id="totalFarms">2,847</div>
                        <div class="stat-label text-secondary">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
                    </div>
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-weight-hanging text-accent-blue text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-accent-blue" id="totalQuantity">680,400</div>
                        <div class="stat-label text-secondary">Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ (Ø·Ù†)</div>
                    </div>
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-coins text-warning text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-warning" id="averagePrice">47.50</div>
                        <div class="stat-label text-secondary">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡/ÙƒÙŠÙ„Ùˆ)</div>
                    </div>
                    <div class="stat-card text-center p-4">
                        <div class="stat-icon mb-4">
                            <i class="fas fa-clock text-accent-green text-3xl"></i>
                        </div>
                        <div class="stat-value text-3xl font-bold text-accent-green" id="lastUpdate">Ø§Ù„Ø¢Ù†</div>
                        <div class="stat-label text-secondary">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                    </div>
                </div>
            </div>
        </section>


        <!-- ØªÙˆÙ‚Ø¹ Ø³Ø¹Ø± Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª (Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù„Ù…Ù†Ø§Ø·Ù‚ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠ) -->
<section class="price-forecast-regional card mb-8">
  <h3 class="text-2xl font-bold mb-4 text-center">
    <i class="fas fa-globe text-accent-green"></i>
    Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù… â€“ Ø·Ø±ÙŠÙ‚ Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠ
  </h3>
  <div class="p-6 bg-glass shadow-inner rounded-lg text-center">
    <p class="text-lg mb-2">
      â³ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ (Ø¬ÙŠØ²Ø© â€“ Ø§Ù„Ù…Ù†ÙˆÙÙŠØ© â€“ Ø§Ù„Ø¨Ø­ÙŠØ±Ø©):
      <span id="avgWeeklyRegionalPrice" class="font-bold text-accent-blue">--</span>â€¯Ø¬
    </p>
    <p class="text-lg mb-2">
      ğŸ“ˆ Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…:
      <span id="expectedRegionalPrice" class="font-bold text-success">--</span>â€¯Ø¬
    </p>
    <p class="text-sm text-secondary" id="regionalPriceInsight">ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ...</p>
  </div>
</section>

     <!-- ØªÙˆÙ‚Ø¹Ø§Øª Ø³Ø¹Ø± Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª -->
<section class="forecast-section mb-8">
  <div class="card text-center">
    <h2 class="text-2xl font-bold mb-6">
      <i class="fas fa-brain text-accent-green"></i>
      ØªÙˆÙ‚Ø¹Ø§Øª Ø³Ø¹Ø± Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª (Ø£Ø³Ø¨ÙˆØ¹ / Ø´Ù‡Ø± / 3 Ø´Ù‡ÙˆØ±)
    </h2>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØªØ±Ø§Øª -->
    <div class="flex flex-center gap-4 mb-6">
      <button class="btn btn-primary" onclick="showForecast('week')">Ø£Ø³Ø¨ÙˆØ¹</button>
      <button class="btn btn-success" onclick="showForecast('month')">Ø´Ù‡Ø±</button>
      <button class="btn btn-warning" onclick="showForecast('3months')">3 Ø´Ù‡ÙˆØ±</button>
    </div>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
    <div id="forecastResult" class="forecast-box p-6 rounded-lg bg-glass shadow-md">
      <p class="text-xl font-semibold mb-2">
        ğŸ”® Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: <span id="forecastPrice" class="text-accent-blue font-bold">--</span> Ø¬Ù†ÙŠÙ‡/ÙƒØ¬Ù…
      </p>
      <p class="text-md text-secondary">
        ğŸ¯ Ø¯Ù‚Ø© Ø§Ù„ØªÙˆÙ‚Ø¹: <span id="forecastConfidence" class="text-success font-bold">--%</span>
      </p>
      <p class="text-sm mt-2 text-muted" id="forecastNote">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙØªØ±Ø© Ù„Ù„ØªÙˆÙ‚Ø¹</p>
    </div>
  </div>
</section>






<!-- ğŸ¥­ Ù…Ù†Ø·Ù‚Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù„Ù„Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª  -->
<section class="results-section card mb-12">
  <div class="results-header mb-6">
    <h3 class="results-title text-2xl font-bold text-center text-accent-blue">
      ğŸ“‹ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« - Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª 
    </h3>
    <div class="flex flex-center gap-4 mt-4">
      <div class="results-count text-secondary" id="resultsCount">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</div>
      <div class="sort-options flex gap-2">
        <label class="text-sm text-gray-500">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨:</label>
        <button class="sort-btn active btn btn-light" data-sort="area">ğŸ“ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</button>
        <button class="sort-btn btn btn-light" data-sort="productivity">âš™ï¸ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©</button>
        <button class="sort-btn btn btn-light" data-sort="name">ğŸ”¤ Ø§Ù„Ø§Ø³Ù…</button>
      </div>
    </div>
  </div>

  <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div class="loading-container text-center" id="loadingContainer">
    <div class="loading-spinner mb-2"></div>
    <p class="text-sm text-gray-500">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</p>
  </div>

  <!-- ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†ØªØ§Ø¦Ø¬ -->
  <div class="empty-state text-center" id="emptyState" style="display: none;">
    <div class="empty-icon text-4xl mb-2">ğŸ”</div>
    <h3 class="text-lg font-semibold mb-1">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬</h3>
    <p class="text-sm text-gray-400">Ø¬Ø±Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ©</p>
  </div>

  <!-- Ø§Ù„Ø´Ø¨ÙƒØ© -->
  <div class="results-grid grid grid-auto gap-6 mt-6" id="resultsGrid">
    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ Ù‡Ù†Ø§ -->
  </div>
</section>







        <!-- Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
        <section class="interactive-map mb-8">
            <div class="card">
                <h2 class="text-2xl font-bold mb-6">
                    <i class="fas fa-map text-accent-blue"></i>
                    Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ù†Ø§Ø·Ù‚
                </h2>
                
                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
                <div class="map-controls mb-6">
                    <div class="flex flex-wrap gap-4 flex-center">
                        <button class="btn btn-primary" onclick="getCurrentLocation()">
                            <i class="fas fa-location-arrow"></i>
                            Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
                        </button>
                        <button class="btn btn-success" onclick="addMangoFarms()">
                            <i class="fas fa-seedling"></i>
                            Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ
                        </button>
                        <button class="btn btn-warning" onclick="showMarkets()">
                            <i class="fas fa-store"></i>
                            Ø§Ù„Ø£Ø³ÙˆØ§Ù‚
                        </button>
                        <button class="btn btn-danger" onclick="clearMap()">
                            <i class="fas fa-eraser"></i>
                            Ù…Ø³Ø­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
                        </button>
                    </div>
                    <div class="mt-4 flex gap-4 flex-center">
                        <input 
                            type="text" 
                            class="form-input" 
                            id="searchLocation" 
                            placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆÙ‚Ø¹ Ù…Ø¹ÙŠÙ†..."
                            style="max-width: 300px;"
                        >
                        <button class="btn btn-primary" onclick="searchLocation()">
                            <i class="fas fa-search"></i>
                            Ø¨Ø­Ø«
                        </button>
                    </div>
                </div>

                <!-- Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
                <div id="map" style="height: 500px; border-radius: 15px; overflow: hidden; border: 2px solid var(--glass-border);"></div>
            </div>
        </section>

        <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© -->
        <section class="regions-section mb-8">
            <h2 class="text-2xl font-bold mb-6 text-center">
                <i class="fas fa-map-marked-alt text-accent-green"></i>
                ØªÙØ§ØµÙŠÙ„ Ù…Ù†Ø§Ø·Ù‚ Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ
            </h2>
            <div class="grid grid-auto gap-6" id="regionsGrid">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ Ø¨Ù€ JavaScript -->
            </div>
        </section>

        <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
        <section class="charts-section mb-8">
            <h2 class="text-2xl font-bold mb-6 text-center">
                <i class="fas fa-chart-area text-accent-blue"></i>
                ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            </h2>
            <div class="grid grid-2 gap-6">
                <div class="card">
                    <h3 class="text-xl font-semibold mb-4 text-center">
                        <i class="fas fa-chart-bar text-warning"></i>
                        ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚
                    </h3>
                    <canvas id="priceChart" width="400" height="200"></canvas>
                </div>
                
                <div class="card">
                    <h3 class="text-xl font-semibold mb-4 text-center">
                        <i class="fas fa-chart-pie text-success"></i>
                        Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©
                    </h3>
                    <canvas id="quantityChart" width="400" height="200"></canvas>
                </div>
                
                <div class="card">
                    <h3 class="text-xl font-semibold mb-4 text-center">
                        <i class="fas fa-chart-line text-accent-blue"></i>
                        Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø©
                    </h3>
                    <canvas id="productivityChart" width="400" height="200"></canvas>
                </div>

                <div class="card">
                    <h3 class="text-xl font-semibold mb-4 text-center">
                        <i class="fas fa-chart-area text-danger"></i>
                        ØªØ·ÙˆØ± Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ
                    </h3>
                    <canvas id="trendChart" width="400" height="200"></canvas>
                </div>
            </div>
        </section>



        <!-- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… -->
        <section class="advanced-search mb-8">
            <div class="card">
                <h2 class="text-2xl font-bold mb-6 text-center">
                    <i class="fas fa-search text-accent-green"></i>
                    Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø¹Ù† Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ
                </h2>
                
                <form id="searchForm" class="grid grid-3 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ</label>
                        <input type="text" id="mangoVariety" class="form-input" placeholder="ÙƒÙŠØªØŒ Ø¹ÙˆÙŠØ³ØŒ Ø²Ø¨Ø¯ÙŠØ©...">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                        <select id="region" class="form-input">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>
                            <option value="Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©">Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©</option>
                            <option value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                            <option value="Ø§Ù„Ø¨Ø­ÙŠØ±Ø©">Ø§Ù„Ø¨Ø­ÙŠØ±Ø©</option>
                            <option value="Ø§Ù„Ø¬ÙŠØ²Ø©">Ø§Ù„Ø¬ÙŠØ²Ø©</option>
                            <option value="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©">Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">Ø§Ù„Ø¬ÙˆØ¯Ø©</label>
                        <select id="quality" class="form-input">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</option>
                            <option value="Ù…Ù…ØªØ§Ø²">Ù…Ù…ØªØ§Ø²</option>
                            <option value="Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹">Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
                            <option value="Ø¬ÙŠØ¯">Ø¬ÙŠØ¯</option>
                            <option value="ØªØµØ¯ÙŠØ±">ØªØµØ¯ÙŠØ±</option>
                        </select>
                    </div>
                </form>

                <div class="flex flex-center gap-4 mb-6">
                    <button type="submit" form="searchForm" class="btn btn-primary">
                        <i class="fas fa-search"></i>
                        Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="resetSearch()">
                        <i class="fas fa-undo"></i>
                        Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                    </button>
                </div>

                <!-- Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« -->
                <div id="searchResults" class="mt-6">
                    <div class="text-center mb-4">
                        <span class="text-lg font-semibold" id="resultsCount">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</span>
                    </div>
                    <div class="grid grid-auto gap-4" id="resultsGrid">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù‡Ù†Ø§ -->
                    </div>
                </div>
            </div>
        </section>





        <!-- Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© -->
        <section class="data-sources mb-8">
            <div class="card">
                <h2 class="text-2xl font-bold mb-6 text-center">
                    <i class="fas fa-database text-accent-blue"></i>
                    Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆØ§Ù„Ù…ÙˆØ«Ù‚Ø©
                </h2>
                <div class="grid grid-auto gap-6">
                    <div class="source-card p-4 text-center">
                        <div class="flex flex-center mb-4">
                            <div class="p-4 rounded-full" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                                <i class="fas fa-satellite text-white text-2xl"></i>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©</h3>
                        <div class="flex flex-center mb-3">
                            <span class="status-dot bg-success animate-pulse"></span>
                            <span class="text-success text-sm">Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·</span>
                        </div>
                        <div class="text-3xl font-bold text-accent-green mb-2" id="satelliteData">2,847</div>
                        <p class="text-secondary">Ù…Ø²Ø±Ø¹Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ø¨Ø± Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©</p>
                        <div class="text-sm text-accent-blue mt-2">Ø¯Ù‚Ø© 98.7%</div>
                    </div>

                    <div class="source-card p-4 text-center">
                        <div class="flex flex-center mb-4">
                            <div class="p-4 rounded-full" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                                <i class="fab fa-facebook text-white text-2xl"></i>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h3>
                        <div class="flex flex-center mb-3">
                            <span class="status-dot bg-success animate-pulse"></span>
                            <span class="text-success text-sm">Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·</span>
                        </div>
                        <div class="text-3xl font-bold text-accent-green mb-2" id="socialData">12.4K</div>
                        <p class="text-secondary">ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ÙŠÙ† ÙˆØ§Ù„ØªØ¬Ø§Ø±</p>
                        <div class="text-sm text-accent-blue mt-2">ØªØ­Ø¯ÙŠØ« Ù…Ø¨Ø§Ø´Ø±</div>
                    </div>

                    <div class="source-card p-4 text-center">
                        <div class="flex flex-center mb-4">
                            <div class="p-4 rounded-full" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                                <i class="fas fa-cloud-sun text-white text-2xl"></i>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø£Ø±ØµØ§Ø¯</h3>
                        <div class="flex flex-center mb-3">
                            <span class="status-dot bg-success animate-pulse"></span>
                            <span class="text-success text-sm">Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·</span>
                        </div>
                        <div class="text-3xl font-bold text-accent-green mb-2" id="weatherData">32Â°</div>
                        <p class="text-secondary">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© ÙˆØ§Ù„Ø±Ø·ÙˆØ¨Ø© Ø§Ù„Ù…Ø«Ù„Ù‰</p>
                        <div class="text-sm text-accent-blue mt-2">65% Ø±Ø·ÙˆØ¨Ø©</div>
                    </div>

                    <div class="source-card p-4 text-center">
                        <div class="flex flex-center mb-4">
                            <div class="p-4 rounded-full" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                                <i class="fas fa-chart-line text-white text-2xl"></i>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³ÙˆØ§Ù‚</h3>
                        <div class="flex flex-center mb-3">
                            <span class="status-dot bg-success animate-pulse"></span>
                            <span class="text-success text-sm">Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·</span>
                        </div>
                        <div class="text-3xl font-bold text-accent-green mb-2" id="marketData">47</div>
                        <p class="text-secondary">Ø³ÙˆÙ‚ Ù…Ø±ÙƒØ²ÙŠ ÙˆØªØ§Ø¬Ø± Ø¬Ù…Ù„Ø©</p>
                        <div class="text-sm text-accent-blue mt-2">API Ù…Ø¨Ø§Ø´Ø±</div>
                    </div>
                </div>
            </div>
        </section>


    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <section class="control-panel mb-8">
        <div class="card text-center">
            <h2 class="text-2xl font-bold mb-6">
                <i class="fas fa-cog text-accent-blue"></i>
                Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            </h2>
            <div class="flex flex-wrap gap-4 flex-center">
                <button class="btn btn-primary" onclick="updateAllData()">
                    <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø´Ø§Ù…Ù„
                </button>
                <button class="btn btn-success" onclick="exportData()">
                    <i class="fas fa-download"></i> ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
                <button class="btn btn-warning" onclick="showAnalytics()">
                    <i class="fas fa-chart-line"></i> ØªØ­Ù„ÙŠÙ„ Ù…ØªÙ‚Ø¯Ù…
                </button>
                <button class="btn btn-info" onclick="generateReport()">
                    <i class="fas fa-file-alt"></i> ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
                </button>
                <button class="btn btn-secondary" onclick="showSettings()">
                    <i class="fas fa-cogs"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
        </div>
    </section>

    <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ« -->
    <div class="update-status" id="updateStatus">
        <div class="status-dot animate-pulse"></div>
        <span id="updateText">Ù…ØªØµÙ„ Ù…Ø¨Ø§Ø´Ø±</span>
    </div>

    <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="update-indicator" id="updateIndicator">
        <i class="fas fa-sync-alt animate-spin"></i>
        <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
    </div>

    <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø§Ù…Ø© -->
    <div class="loading" id="globalLoading">
        <div class="spinner"></div>
        <p class="mt-4">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
    </div>

    <!-- JavaScript -->
    <script>
        function updateAllData() {
            showLoader();
            setTimeout(() => {
                alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
                hideLoader();
            }, 1500);
        }

        function exportData() {
            alert("ğŸ“¥ ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù…Ù„Ù Excel...");
        }

        function showAnalytics() {
            alert("ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬...");
        }

        function generateReport() {
            alert("ğŸ“ ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„...");
        }

        function showSettings() {
            alert("âš™ï¸ ÙØªØ­ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…...");
        }

        function showLoader() {
            document.getElementById('globalLoading').style.display = 'block';
            document.getElementById('updateIndicator').style.display = 'block';
        }

        function hideLoader() {
            document.getElementById('globalLoading').style.display = 'none';
            document.getElementById('updateIndicator').style.display = 'none';
        }
    </script>



    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ (Ù…Ø­Ø§ÙƒØ§Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
        const mangoDatabase = [
            {
                id: 1,
                variety: 'ÙƒÙŠØª',
                scientificName: 'Mangifera indica var. Keitt',
                region: 'Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©',
                area: 850,
                quality: 'Ù…Ù…ØªØ§Ø²',
                productivity: 18.5,
                season: 'Ù…ØªØ£Ø®Ø±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©',
                city: 'Ø£Ø¨Ùˆ ØµÙˆÙŠØ±',
                characteristics: ['Ø­Ø¬Ù… ÙƒØ¨ÙŠØ±', 'Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ù…Ø±Ø§Ø¶', 'ØµØ§Ù„Ø­ Ù„Ù„ØªØµØ¯ÙŠØ±', 'Ù†ÙƒÙ‡Ø© Ù…Ù…ÙŠØ²Ø©'],
                averageWeight: 450,
                sugarContent: 16.8,
                shelfLife: 21
            },
            {
                id: 2,
                variety: 'Ø¹ÙˆÙŠØ³',
                scientificName: 'Mangifera indica var. Ewais',
                region: 'Ø§Ù„Ø´Ø±Ù‚ÙŠØ©',
                area: 1200,
                quality: 'Ù…Ù…ØªØ§Ø²',
                productivity: 22.3,
                season: 'Ù…Ø¨ÙƒØ±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø§Ù„Ø´Ø±Ù‚ÙŠØ©',
                city: 'Ø§Ù„Ø²Ù‚Ø§Ø²ÙŠÙ‚',
                characteristics: ['Ø­Ù„Ø§ÙˆØ© Ø¹Ø§Ù„ÙŠØ©', 'Ù„ÙˆÙ† Ø¬Ø°Ø§Ø¨', 'Ù…Ø¨ÙƒØ± Ø§Ù„Ù†Ø¶Ø¬', 'Ù…Ø­Ø¨ÙˆØ¨ Ù…Ø­Ù„ÙŠØ§Ù‹'],
                averageWeight: 280,
                sugarContent: 19.2,
                shelfLife: 14
            },
            {
                id: 3,
                variety: 'Ø²Ø¨Ø¯ÙŠØ©',
                scientificName: 'Mangifera indica var. Zebdia',
                region: 'Ø§Ù„Ø¨Ø­ÙŠØ±Ø©',
                area: 950,
                quality: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',
                productivity: 16.8,
                season: 'Ù…Ù†ØªØµÙ Ø§Ù„Ù…ÙˆØ³Ù…',
                irrigation: 'Ø±Ø´',
                governorate: 'Ø§Ù„Ø¨Ø­ÙŠØ±Ø©',
                city: 'Ø§Ù„Ù†ÙˆØ¨Ø§Ø±ÙŠØ©',
                characteristics: ['Ù‚ÙˆØ§Ù… ÙƒØ±ÙŠÙ…ÙŠ', 'Ø·Ø¹Ù… Ø­Ù„Ùˆ', 'Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ù†Ù‚Ù„', 'ØªØ®Ø²ÙŠÙ† Ø¬ÙŠØ¯'],
                averageWeight: 320,
                sugarContent: 17.5,
                shelfLife: 18
            },
            {
                id: 4,
                variety: 'Ø³ÙƒØ±ÙŠ',
                scientificName: 'Mangifera indica var. Succary',
                region: 'Ø§Ù„Ø¬ÙŠØ²Ø©',
                area: 650,
                quality: 'ØªØµØ¯ÙŠØ±',
                productivity: 20.1,
                season: 'Ù…Ø¨ÙƒØ±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø§Ù„Ø¬ÙŠØ²Ø©',
                city: 'Ø§Ù„Ø¹ÙŠØ§Ø·',
                characteristics: ['Ø³ÙƒØ±ÙŠØ§Øª Ø¹Ø§Ù„ÙŠØ©', 'Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ', 'Ø±Ø§Ø¦Ø­Ø© Ø¹Ø·Ø±Ø©', 'Ø¬ÙˆØ¯Ø© ØªØµØ¯ÙŠØ±'],
                averageWeight: 380,
                sugarContent: 21.3,
                shelfLife: 16
            },
            {
                id: 5,
                variety: 'Ù‡Ù†Ø¯ÙŠ',
                scientificName: 'Mangifera indica var. Hindi',
                region: 'Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©',
                area: 420,
                quality: 'Ø¬ÙŠØ¯',
                productivity: 14.7,
                season: 'Ù…Ù†ØªØµÙ Ø§Ù„Ù…ÙˆØ³Ù…',
                irrigation: 'ØºÙ…Ø±',
                governorate: 'Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©',
                city: 'Ø´Ø¨Ø±Ø§ Ø§Ù„Ø®ÙŠÙ…Ø©',
                characteristics: ['Ø­Ø¬Ù… Ù…ØªÙˆØ³Ø·', 'Ø·Ø¹Ù… ØªÙ‚Ù„ÙŠØ¯ÙŠ', 'Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹ØµØ§Ø¦Ø±', 'Ø³Ø¹Ø± Ø§Ù‚ØªØµØ§Ø¯ÙŠ'],
                averageWeight: 250,
                sugarContent: 15.8,
                shelfLife: 12
            },
            {
                id: 6,
                variety: 'ØªÙˆÙ…ÙŠ Ø£ØªÙƒÙŠÙ†Ø²',
                scientificName: 'Mangifera indica var. Tommy Atkins',
                region: 'Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©',
                area: 780,
                quality: 'ØªØµØ¯ÙŠØ±',
                productivity: 19.4,
                season: 'Ù…Ù†ØªØµÙ Ø§Ù„Ù…ÙˆØ³Ù…',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©',
                city: 'Ø´Ø¨ÙŠÙ† Ø§Ù„ÙƒÙˆÙ…',
                characteristics: ['Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø´Ø­Ù†', 'Ø´ÙƒÙ„ Ø¬Ø°Ø§Ø¨', 'Ù„ÙˆÙ† Ø£Ø­Ù…Ø±', 'Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„Ù…ÙŠØ©'],
                averageWeight: 420,
                sugarContent: 16.2,
                shelfLife: 25
            },
            {
                id: 7,
                variety: 'ÙƒÙ†Øª',
                scientificName: 'Mangifera indica var. Kent',
                region: 'ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®',
                area: 320,
                quality: 'Ù…Ù…ØªØ§Ø²',
                productivity: 17.9,
                season: 'Ù…ØªØ£Ø®Ø±',
                irrigation: 'Ø±Ø´',
                governorate: 'ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®',
                city: 'Ø¯Ø³ÙˆÙ‚',
                characteristics: ['Ø­Ø¬Ù… ÙƒØ¨ÙŠØ±', 'Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ù„ÙŠØ§Ù', 'Ø·Ø¹Ù… Ø­Ù„Ùˆ', 'Ù†Ø¶Ø¬ Ù…ØªØ£Ø®Ø±'],
                averageWeight: 480,
                sugarContent: 18.1,
                shelfLife: 19
            },
            {
                id: 8,
                variety: 'Ù‡Ø§ÙŠØ¯Ù†',
                scientificName: 'Mangifera indica var. Haden',
                region: 'Ø§Ù„ØºØ±Ø¨ÙŠØ©',
                area: 290,
                quality: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',
                productivity: 15.6,
                season: 'Ù…Ø¨ÙƒØ±',
                irrigation: 'Ù…Ø­ÙˆØ±ÙŠ',
                governorate: 'Ø§Ù„ØºØ±Ø¨ÙŠØ©',
                city: 'Ø·Ù†Ø·Ø§',
                characteristics: ['Ù„ÙˆÙ† Ø£Ø­Ù…Ø± ÙˆØ±Ø¯ÙŠ', 'Ø¹Ø·Ø± Ù‚ÙˆÙŠ', 'Ø·Ø¹Ù… Ù…Ù…ÙŠØ²', 'ØªØ§Ø±ÙŠØ® Ø¹Ø±ÙŠÙ‚'],
                averageWeight: 350,
                sugarContent: 17.8,
                shelfLife: 15
            },
            {
                id: 9,
                variety: 'ÙÙˆÙ†Ø³Ùˆ',
                scientificName: 'Mangifera indica var. Alphonso',
                region: 'Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©',
                area: 180,
                quality: 'Ù…Ù…ØªØ§Ø²',
                productivity: 16.3,
                season: 'Ù…Ø¨ÙƒØ±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©',
                city: 'Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©',
                characteristics: ['Ù…Ù„Ùƒ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ', 'Ø·Ø¹Ù… Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ', 'Ù„Ø¨ ÙƒØ«ÙŠÙ', 'Ø¬ÙˆØ¯Ø© ÙØ§Ø¦Ù‚Ø©'],
                averageWeight: 300,
                sugarContent: 20.5,
                shelfLife: 14
            },
            {
                id: 10,
                variety: 'Ø¨Ø§Ù„Ù…Ø±',
                scientificName: 'Mangifera indica var. Palmer',
                region: 'Ø¯Ù…ÙŠØ§Ø·',
                area: 210,
                quality: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',
                productivity: 18.8,
                season: 'Ù…Ù†ØªØµÙ Ø§Ù„Ù…ÙˆØ³Ù…',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø¯Ù…ÙŠØ§Ø·',
                city: 'Ø±Ø£Ø³ Ø§Ù„Ø¨Ø±',
                characteristics: ['Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø±Ø·ÙˆØ¨Ø©', 'Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø¹Ø§Ù„ÙŠØ©', 'ØªÙƒÙŠÙ Ø³Ø§Ø­Ù„ÙŠ', 'Ù†ÙƒÙ‡Ø© Ù…ØªÙˆØ§Ø²Ù†Ø©'],
                averageWeight: 380,
                sugarContent: 16.9,
                shelfLife: 17
            },
            {
                id: 11,
                variety: 'Ø¬Ù„ÙŠÙ†',
                scientificName: 'Mangifera indica var. Glenn',
                region: 'Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡',
                area: 150,
                quality: 'Ø¬ÙŠØ¯',
                productivity: 12.4,
                season: 'Ù…ØªØ£Ø®Ø±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡',
                city: 'Ø§Ù„Ø¹Ø±ÙŠØ´',
                characteristics: ['Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø¬ÙØ§Ù', 'Ù…ØªÙƒÙŠÙ ØµØ­Ø±Ø§ÙˆÙŠ', 'Ø­Ø¬Ù… ØµØºÙŠØ±', 'Ø·Ø¹Ù… Ù…Ø±ÙƒØ²'],
                averageWeight: 200,
                sugarContent: 18.7,
                shelfLife: 13
            },
            {
                id: 12,
                variety: 'ÙƒÙŠÙˆ',
                scientificName: 'Mangifera indica var. Keo',
                region: 'Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡',
                area: 85,
                quality: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',
                productivity: 11.8,
                season: 'Ù…ØªØ£Ø®Ø±',
                irrigation: 'ØªÙ†Ù‚ÙŠØ·',
                governorate: 'Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡',
                city: 'Ø·ÙˆØ± Ø³ÙŠÙ†Ø§Ø¡',
                characteristics: ['ØªØ­Ù…Ù„ Ø§Ù„Ù…Ù„ÙˆØ­Ø©', 'Ø²Ø±Ø§Ø¹Ø© Ø¹Ø¶ÙˆÙŠØ©', 'Ø­Ø¬Ù… Ù…ØªÙˆØ³Ø·', 'Ø¬ÙˆØ¯Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©'],
                averageWeight: 270,
                sugarContent: 17.2,
                shelfLife: 16
            }
        ];

        let filteredResults = [...mangoDatabase];
        let currentSort = 'area';

        // Ø¹Ù†Ø§ØµØ± DOM
        const searchForm = document.getElementById('searchForm');
        const loadingContainer = document.getElementById('loadingContainer');
        const emptyState = document.getElementById('emptyState');
        const resultsGrid = document.getElementById('resultsGrid');
        const resultsCount = document.getElementById('resultsCount');

        // Range sliders
        const areaMinSlider = document.getElementById('areaMin');
        const areaMaxSlider = document.getElementById('areaMax');
        const productivityMinSlider = document.getElementById('productivityMin');
        const productivityMaxSlider = document.getElementById('productivityMax');

        // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø§Ù„Ù€ sliders
        function updateSliderValues() {
            document.getElementById('areaMinValue').textContent = areaMinSlider.value;
            document.getElementById('areaMaxValue').textContent = areaMaxSlider.value;
            document.getElementById('productivityMinValue').textContent = productivityMinSlider.value;
            document.getElementById('productivityMaxValue').textContent = productivityMaxSlider.value;
        }

        // Event listeners Ù„Ù„Ù€ sliders
        [areaMinSlider, areaMaxSlider, productivityMinSlider, productivityMaxSlider].forEach(slider => {
            slider.addEventListener('input', () => {
                updateSliderValues();
                performSearch();
            });
        });

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªØ±ØªÙŠØ¨
        document.querySelectorAll('.sort-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentSort = btn.dataset.sort;
                displayResults(filteredResults);
            });
        });

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø«
        function performSearch() {
            showLoading();
            
            setTimeout(() => {
                const variety = document.getElementById('mangoVariety').value.toLowerCase();
                const region = document.getElementById('region').value;
                const quality = document.getElementById('quality').value;
                const season = document.getElementById('season').value;
                const irrigation = document.getElementById('irrigation').value;
                
                const areaMin = parseInt(areaMinSlider.value);
                const areaMax = parseInt(areaMaxSlider.value);
                const productivityMin = parseInt(productivityMinSlider.value);
                const productivityMax = parseInt(productivityMaxSlider.value);

                filteredResults = mangoDatabase.filter(mango => {
                    const matchesVariety = !variety || mango.variety.toLowerCase().includes(variety);
                    const matchesRegion = !region || mango.region === region;
                    const matchesQuality = !quality || mango.quality === quality;
                    const matchesSeason = !season || mango.season === season;
                    const matchesIrrigation = !irrigation || mango.irrigation === irrigation;
                    const matchesArea = mango.area >= areaMin && mango.area <= areaMax;
                    const matchesProductivity = mango.productivity >= productivityMin && mango.productivity <= productivityMax;

                    return matchesVariety && matchesRegion && matchesQuality && 
                           matchesSeason && matchesIrrigation && matchesArea && matchesProductivity;
                });

                hideLoading();
                displayResults(filteredResults);
            }, 1000);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function displayResults(results) {
            if (results.length === 0) {
                showEmptyState();
                return;
            }

            hideEmptyState();
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            results.sort((a, b) => {
                switch(currentSort) {
                    case 'area':
                        return b.area - a.area;
                    case 'productivity':
                        return b.productivity - a.productivity;
                    case 'name':
                        return a.variety.localeCompare(b.variety, 'ar');
                    default:
                        return 0;
                }
            });

            resultsCount.textContent = `Ø¹Ø±Ø¶ ${results.length} Ù†ØªÙŠØ¬Ø©`;
            
            resultsGrid.innerHTML = results.map(mango => `
                <div class="result-card ripple-effect" onclick="createRipple(event, this)">
                    <div class="card-header">
                        <div class="mango-info">
                            <h3 class="mango-variety">${mango.variety}</h3>
                            <p class="mango-scientific-name">${mango.scientificName}</p>
                        </div>
                        <span class="quality-badge quality-${getQualityClass(mango.quality)}">${mango.quality}</span>
                    </div>

                    <div class="card-content">
                        <div class="location-section">
                            <h4 class="location-title">
                                <i class="fas fa-map-marker-alt"></i>
                                Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                            </h4>
                            <div class="location-details">
                                <div class="location-item">
                                    <span class="location-label">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©:</span>
                                    <span class="location-value">${mango.governorate}</span>
                                </div>
                                <div class="location-item">
                                    <span class="location-label">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</span>
                                    <span class="location-value">${mango.city}</span>
                                </div>
                                <div class="location-item">
                                    <span class="location-label">Ø§Ù„Ù…Ø³Ø§Ø­Ø©:</span>
                                    <span class="location-value area-highlight">${mango.area} ÙØ¯Ø§Ù†</span>
                                </div>
                                <div class="location-item">
                                    <span class="location-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø±ÙŠ:</span>
                                    <span class="location-value">${mango.irrigation}</span>
                                </div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value">${mango.productivity}</div>
                                <div class="stat-label">Ø·Ù†/ÙØ¯Ø§Ù†</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${mango.averageWeight}</div>
                                <div class="stat-label">Ø¬Ø±Ø§Ù…/Ø«Ù…Ø±Ø©</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${mango.sugarContent}%</div>
                                <div class="stat-label">Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙƒØ±</div>
                            </div>
                        </div>

                        <div class="characteristics">
                            <h5 class="characteristics-title">Ø®ØµØ§Ø¦Øµ Ù…Ù…ÙŠØ²Ø©</h5>
                            <div class="characteristics-tags">
                                ${mango.characteristics.map(char => `<span class="characteristic-tag">${char}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        function getQualityClass(quality) {
            const qualityMap = {
                'Ù…Ù…ØªØ§Ø²': 'excellent',
                'ØªØµØ¯ÙŠØ±': 'premium',
                'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹': 'good',
                'Ø¬ÙŠØ¯': 'good'
            };
            return qualityMap[quality] || 'good';
        }

        function showLoading() {
            loadingContainer.style.display = 'block';
            resultsGrid.style.display = 'none';
            emptyState.style.display = 'none';
        }

        function hideLoading() {
            loadingContainer.style.display = 'none';
            resultsGrid.style.display = 'grid';
        }

        function showEmptyState() {
            emptyState.style.display = 'block';
            resultsGrid.style.display = 'none';
            resultsCount.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬';
        }

        function hideEmptyState() {
            emptyState.style.display = 'none';
        }

        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ¬Ø©
        function createRipple(event, element) {
            const ripple = document.createElement('div');
            ripple.classList.add('ripple');
            
            const rect = element.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            
            element.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // Event listeners
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            performSearch();
        });

        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
        document.getElementById('mangoVariety').addEventListener('input', () => {
            clearTimeout(window.searchTimeout);
            window.searchTimeout = setTimeout(performSearch, 500);
        });

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ±
        ['region', 'quality', 'season', 'irrigation'].forEach(id => {
            document.getElementById(id).addEventListener('change', performSearch);
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStatistics() {
            const totalArea = mangoDatabase.reduce((sum, mango) => sum + mango.area, 0);
            const totalProduction = mangoDatabase.reduce((sum, mango) => sum + (mango.area * mango.productivity), 0);
            const avgProductivity = (totalProduction / totalArea).toFixed(1);

            document.getElementById('totalArea').textContent = totalArea.toLocaleString('ar-EG');
            document.getElementById('totalFarms').textContent = mangoDatabase.length.toLocaleString('ar-EG');
            document.getElementById('totalProduction').textContent = Math.round(totalProduction).toLocaleString('ar-EG');
            document.getElementById('avgProductivity').textContent = avgProductivity;
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', () => {
            updateSliderValues();
            updateStatistics();
            displayResults(mangoDatabase);
        });

        // ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø²Ø±
        document.querySelectorAll('.ripple-effect').forEach(button => {
            button.addEventListener('click', (e) => createRipple(e, button));
        });
    </script>

    
    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ (Ù…Ø­Ø§ÙƒØ§Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

    document.addEventListener('DOMContentLoaded', async () => {
    await loadInitialData();
    initializeCharts();
    setupEventListeners();
});

// ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ==========
async function loadInitialData() {
    showGlobalLoading(true);
    try {
        await updateDashboardStats();
        await loadMarketPrices();
        await loadRegions();
        await initializeMap();
    } catch (error) {
        console.error("Error loading data:", error);
    } finally {
        showGlobalLoading(false);
    }
}

// ========== Ø¹Ø±Ø¶ Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ==========
function showGlobalLoading(show) {
    const loading = document.getElementById("globalLoading");
    if (loading) loading.style.display = show ? "flex" : "none";
}

// ========== ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ==========
async function updateDashboardStats() {
    document.getElementById("lastUpdate").textContent = "Ø§Ù„Ø¢Ù†";
    document.getElementById("satelliteData").textContent = 127;
    document.getElementById("socialData").textContent = "2.4K";
    document.getElementById("weatherData").textContent = "32Â°";
    document.getElementById("marketData").textContent = 15;
}

// ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ==========
async function loadMarketPrices() {
    const pricesContainer = document.getElementById("marketPrices");
    pricesContainer.innerHTML = "";
    const dummyPrices = [
        { region: "Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", price: 45 },
        { region: "Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", price: 47 },
        { region: "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", price: 44 },
        { region: "Ø§Ù„Ø¬ÙŠØ²Ø©", price: 49 },
        { region: "Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©", price: 46 },
    ];
    dummyPrices.forEach(p => {
        const card = document.createElement("div");
        card.className = "price-card text-center p-4";
        card.innerHTML = `
            <div class="text-xl font-bold text-accent-blue mb-2">${p.region}</div>
            <div class="text-3xl font-bold text-warning">${p.price} Ø¬Ù†ÙŠÙ‡</div>
        `;
        pricesContainer.appendChild(card);
    });
    document.getElementById("lastPriceUpdate").innerHTML = `
        <i class="fas fa-check-circle text-success"></i>
        ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†
    `;
}

// ========== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ==========
function initializeCharts() {
    const priceChart = new Chart(document.getElementById("priceChart"), {
        type: "bar",
        data: {
            labels: ["Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", "Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", "Ø§Ù„Ø¬ÙŠØ²Ø©"],
            datasets: [{
                label: "Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡",
                data: [45, 47, 44, 49],
                backgroundColor: "#f59e0b"
            }]
        }
    });

    const quantityChart = new Chart(document.getElementById("quantityChart"), {
        type: "pie",
        data: {
            labels: ["Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", "Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©"],
            datasets: [{
                data: [1245, 1800, 1300],
                backgroundColor: ["#22c55e", "#0ea5e9", "#a855f7"]
            }]
        }
    });

    const productivityChart = new Chart(document.getElementById("productivityChart"), {
        type: "line",
        data: {
            labels: ["ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ"],
            datasets: [{
                label: "Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©",
                data: [12, 15.2, 14, 16.5, 17],
                borderColor: "#3b82f6",
                fill: false
            }]
        }
    });

    const trendChart = new Chart(document.getElementById("trendChart"), {
        type: "area",
        data: {
            labels: ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ"],
            datasets: [{
                label: "Ø§Ù„Ø³Ø¹Ø±",
                data: [40, 42, 43, 45, 47, 48],
                backgroundColor: "rgba(255, 99, 132, 0.3)",
                borderColor: "#ef4444"
            }]
        }
    });
}

// ========== ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ==========
async function loadRegions() {
    const regionsGrid = document.getElementById("regionsGrid");
    if (!regionsGrid) return;
    regionsGrid.innerHTML = "";
    const dummyRegions = [
        { name: "Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", farms: 340, quantity: 980, price: 45 },
        { name: "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", farms: 220, quantity: 720, price: 44 },
        { name: "Ø§Ù„Ø¬ÙŠØ²Ø©", farms: 180, quantity: 600, price: 49 }
    ];
    dummyRegions.forEach(region => {
        const card = document.createElement("div");
        card.className = "region-card";
        card.innerHTML = `
            <h4 class="text-xl font-bold text-accent-green">${region.name}</h4>
            <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹: <strong>${region.farms}</strong></p>
            <p>Ø§Ù„ÙƒÙ…ÙŠØ©: <strong>${region.quantity} Ø·Ù†</strong></p>
            <p>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø±: <strong>${region.price} Ø¬Ù†ÙŠÙ‡/Ùƒ</strong></p>
        `;
        regionsGrid.appendChild(card);
    });
}

// ========== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ==========
let map;
function initializeMap() {
    map = L.map("map").setView([30.5, 31], 7);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 18
    }).addTo(map);
}

function addMangoFarms() {
    const locations = [
        { lat: 30.6, lng: 31.1, name: "Ù…Ø²Ø±Ø¹Ø© 1" },
        { lat: 30.8, lng: 30.9, name: "Ù…Ø²Ø±Ø¹Ø© 2" }
    ];
    locations.forEach(loc => {
        L.marker([loc.lat, loc.lng])
            .addTo(map)
            .bindPopup(`<strong>${loc.name}</strong>`);
    });
}

function showMarkets() {
    const markets = [
        { lat: 30.7, lng: 30.95, name: "Ø³ÙˆÙ‚ 1" },
        { lat: 30.9, lng: 31.05, name: "Ø³ÙˆÙ‚ 2" }
    ];
    markets.forEach(loc => {
        L.circle([loc.lat, loc.lng], {
            color: "orange",
            radius: 5000
        }).addTo(map).bindPopup(`<strong>${loc.name}</strong>`);
    });
}

function getCurrentLocation() {
    navigator.geolocation.getCurrentPosition(pos => {
        const { latitude, longitude } = pos.coords;
        map.setView([latitude, longitude], 13);
        L.marker([latitude, longitude]).addTo(map).bindPopup("Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ").openPopup();
    });
}

function clearMap() {
    map.eachLayer(layer => {
        if (layer instanceof L.Marker || layer instanceof L.Circle) {
            map.removeLayer(layer);
        }
    });
}

// ========== Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ==========
function setupEventListeners() {
    const form = document.getElementById("searchForm");
    if (form) {
        form.addEventListener("submit", e => {
            e.preventDefault();
            performSearch();
        });
    }
}

function performSearch() {
    const resultsGrid = document.getElementById("resultsGrid");
    const loadingContainer = document.getElementById("loadingContainer");
    const emptyState = document.getElementById("emptyState");
    const resultsCount = document.getElementById("resultsCount");

    resultsGrid.innerHTML = "";
    loadingContainer.style.display = "block";
    emptyState.style.display = "none";

    setTimeout(() => {
        loadingContainer.style.display = "none";
        const dummyResults = [
            { variety: "ÙƒÙŠØª", region: "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", area: 12, productivity: 14.5 },
            { variety: "Ø¹ÙˆÙŠØ³", region: "Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", area: 20, productivity: 16.2 }
        ];
        if (dummyResults.length === 0) {
            emptyState.style.display = "block";
            resultsCount.textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬";
        } else {
            dummyResults.forEach(result => {
                const card = document.createElement("div");
                card.className = "result-card";
                card.innerHTML = `
                    <h4 class="font-bold text-accent-green text-xl">${result.variety}</h4>
                    <p>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${result.region}</p>
                    <p>Ø§Ù„Ù…Ø³Ø§Ø­Ø©: ${result.area} ÙØ¯Ø§Ù†</p>
                    <p>Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©: ${result.productivity} Ø·Ù†/ÙØ¯Ø§Ù†</p>
                `;
                resultsGrid.appendChild(card);
            });
            resultsCount.textContent = `Ø¹Ø±Ø¶ ${dummyResults.length} Ù†ØªÙŠØ¬Ø©`;
        }
    }, 1000);
}



    </script>
  
<script>
document.addEventListener("DOMContentLoaded", function () {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯
    const mapContainer = document.getElementById("map");
    if (!mapContainer) return;

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    const map = L.map("map").setView([30.0444, 31.2357], 6); // Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹

    // Ø¥Ø¶Ø§ÙØ© Ø·Ø¨Ù‚Ø© Ø®Ø±ÙŠØ·Ø© Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "Â© OpenStreetMap",
    }).addTo(map);

    // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø²Ø§Ø±Ø¹
    const farmIcon = L.icon({
        iconUrl: "https://cdn-icons-png.flaticon.com/512/766/766570.png",
        iconSize: [32, 32],
        iconAnchor: [16, 32],
        popupAnchor: [0, -30]
    });

    // Ù…Ø²Ø§Ø±Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠØ©
    const farms = [
        { name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ÙƒÙŠØª - Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", coords: [30.635, 30.902] },
        { name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù†ÙˆØ¨Ø§Ø±ÙŠØ©", coords: [30.578, 30.475] },
        { name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø¬ÙŠØ²Ø©", coords: [29.987, 31.211] },
    ];

    // Ø¹Ø±Ø¶ Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ
    window.addMangoFarms = function () {
        farms.forEach((farm) => {
            const marker = L.marker(farm.coords, { icon: farmIcon }).addTo(map);
            marker.bindPopup(`<b>${farm.name}</b>`).openPopup();
        });
    };

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø³ÙˆØ§Ù‚
    window.showMarkets = function () {
        const markets = [
            { name: "Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø¨ÙˆØ±", coords: [30.160, 31.377] },
            { name: "Ø³ÙˆÙ‚ Ø§Ù„Ø¬Ù…Ù„Ø© - 6 Ø£ÙƒØªÙˆØ¨Ø±", coords: [29.963, 30.933] }
        ];
        markets.forEach((market) => {
            const marker = L.marker(market.coords).addTo(map);
            marker.bindPopup(`<b>${market.name}</b>`).openPopup();
        });
    };

    // Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ù† Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    window.clearMap = function () {
        map.eachLayer(function (layer) {
            if (layer instanceof L.Marker) {
                map.removeLayer(layer);
            }
        });
    };

    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
    window.getCurrentLocation = function () {
        if (!navigator.geolocation) {
            alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
            return;
        }
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const { latitude, longitude } = position.coords;
                map.setView([latitude, longitude], 13);
                L.marker([latitude, longitude]).addTo(map)
                    .bindPopup("ğŸ“ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ").openPopup();
            },
            () => alert("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.")
        );
    };

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆÙ‚Ø¹ Ù…Ø¹ÙŠÙ†
    window.searchLocation = async function () {
        const query = document.getElementById("searchLocation").value.trim();
        if (!query) return;

        const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`;

        try {
            const response = await fetch(url);
            const data = await response.json();
            if (data.length > 0) {
                const { lat, lon } = data[0];
                map.setView([lat, lon], 13);
                L.marker([lat, lon]).addTo(map)
                    .bindPopup(`ğŸ“ ${query}`).openPopup();
            } else {
                alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
            }
        } catch (error) {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«.");
        }
    };
});
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  initializeMap();
  injectRealStats();
  initializeCharts();
  fetchLivePrices();
  setupMapButtons();
});

// ... (ÙƒÙˆØ¯ initializeMap, injectRealStats, initializeCharts, setupMapButtons ÙƒÙ…Ø§ Ø³Ø¨Ù‚)
  
//  Ø¬Ù„Ø¨ ÙˆØ¹Ø±Ø¶ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§
async function fetchLivePrices() {
  const priceInfo = {
    date: "2025â€‘03â€‘25",
    egp: 65,         // Ù…Ù† Tridge
    usd: 1.29        // Ù…ÙƒØ§ÙØ¦ Ø¨Ø§Ù„Ù€ USD
  };

  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø³Ø¹Ø± ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  const avgPriceEl = document.getElementById("averagePrice");
  const lastUpdateEl = document.getElementById("lastUpdate");
  avgPriceEl.textContent = `${priceInfo.egp}â€¯Ø¬/Ùƒ (â‰ˆâ€¯${priceInfo.usd.toFixed(2)}â€¯$)`;
  lastUpdateEl.textContent = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${priceInfo.date}\n(Tridge)`;

  // ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
  drawChart("priceChart",
    ["Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± (Ù…Ø­Ù„ÙŠ)"],
    [priceInfo.egp],
    "bar",
    "Ø¬Ù†ÙŠÙ‡/ÙƒØ¬Ù…"
  );
}
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  initializeMap();
  injectRealStats();
  initializeCharts();
  fetchLivePrices();
  setupMapButtons();
});

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø±ÙŠØ·Ø© Leaflet
let map;
function initializeMap() {
  map = L.map('map').setView([30.0444, 31.2357], 6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);
}

// Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
function injectRealStats() {
  document.getElementById("totalRegions").textContent = "12";
  document.getElementById("availableCount").textContent = "8";
  document.getElementById("totalFarms").textContent = "2,847";
  document.getElementById("totalQuantity").textContent = "680,400";
  document.getElementById("averagePrice").textContent = "65";
  document.getElementById("lastUpdate").textContent = "2025â€‘03â€‘25";
  document.getElementById("totalArea").textContent = "45,230";
  document.getElementById("totalProduction").textContent = "680,400";
  document.getElementById("avgProductivity").textContent = "15.2";
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆØ¹Ø±Ø¶Ù‡Ø§
async function fetchLivePrices() {
  const priceInfo = {
    date: "2025â€‘03â€‘25",
    egp: 65,
    usd: 1.29
  };

  const avgPriceEl = document.getElementById("averagePrice");
  const lastUpdateEl = document.getElementById("lastUpdate");
  avgPriceEl.textContent = `${priceInfo.egp} Ø¬/Ùƒ (â‰ˆ ${priceInfo.usd.toFixed(2)} $)`;
  lastUpdateEl.textContent = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${priceInfo.date} (Tridge)`;

  drawChart("priceChart", ["Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± (Ù…Ø­Ù„ÙŠ)"], [priceInfo.egp], "bar", "Ø¬Ù†ÙŠÙ‡/ÙƒØ¬Ù…");
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
function setupMapButtons() {
  window.getCurrentLocation = function () {
    navigator.geolocation.getCurrentPosition(pos => {
      const { latitude, longitude } = pos.coords;
      map.setView([latitude, longitude], 13);
      L.marker([latitude, longitude]).addTo(map).bindPopup("Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ").openPopup();
    });
  };

  window.addMangoFarms = function () {
    const farms = [
      { lat: 30.65, lon: 30.90, name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø¨Ø­ÙŠØ±Ø©" },
      { lat: 30.95, lon: 31.15, name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø¬ÙŠØ²Ø©" },
      { lat: 30.30, lon: 31.25, name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©" }
    ];
    farms.forEach(farm => {
      L.marker([farm.lat, farm.lon]).addTo(map).bindPopup(farm.name);
    });
  };

  window.showMarkets = function () {
    const markets = [
      { lat: 30.0444, lon: 31.2357, name: "Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø¨ÙˆØ±" },
      { lat: 30.1200, lon: 31.3200, name: "Ø³ÙˆÙ‚ 6 Ø£ÙƒØªÙˆØ¨Ø±" }
    ];
    markets.forEach(market => {
      L.marker([market.lat, market.lon], {
        icon: L.icon({
          iconUrl: "https://cdn-icons-png.flaticon.com/512/3075/3075977.png",
          iconSize: [30, 30]
        })
      }).addTo(map).bindPopup(market.name);
    });
  };

  window.clearMap = function () {
    map.eachLayer(layer => {
      if (layer instanceof L.Marker) map.removeLayer(layer);
    });
  };

  window.searchLocation = function () {
    const query = document.getElementById("searchLocation").value;
    if (!query) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ø¨Ø­Ø«");
    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`)
      .then(res => res.json())
      .then(data => {
        if (data.length > 0) {
          const { lat, lon, display_name } = data[0];
          map.setView([lat, lon], 13);
          L.marker([lat, lon]).addTo(map).bindPopup(display_name).openPopup();
        } else {
          alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹");
        }
      });
  };
}

// Ø±Ø³Ù… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
function initializeCharts() {
  drawChart("quantityChart", ["Ù…Ø²Ø§Ø±Ø¹ Ù…ØªÙˆÙØ±Ø©", "Ù…Ø²Ø§Ø±Ø¹ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©"], [8, 4], "pie");
  drawChart("productivityChart", ["Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©/ÙØ¯Ø§Ù†"], [15.2], "bar", "Ø·Ù†/ÙØ¯Ø§Ù†");
  drawChart("trendChart", ["Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ", "ÙŠÙˆÙ„ÙŠÙˆ", "Ø£ØºØ³Ø·Ø³"], [42, 48, 65, 60], "line", "Ø³Ø¹Ø± Ø´Ù‡Ø±ÙŠ");
}

function drawChart(id, labels, data, type, label = "") {
  const ctx = document.getElementById(id).getContext("2d");
  new Chart(ctx, {
    type,
    data: {
      labels,
      datasets: [{
        label,
        data,
        borderWidth: 2,
        fill: true
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: type === "pie" },
        tooltip: { enabled: true }
      },
      scales: type !== "pie" ? {
        y: {
          beginAtZero: true
        }
      } : {}
    }
  });
}

</script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const forecastData = {
  week:    { labels: ['Ø§Ù„ÙŠÙˆÙ…', 'ØºØ¯Ù‹Ø§', '2 Ø£ÙŠØ§Ù…', '3 Ø£ÙŠØ§Ù…', '4 Ø£ÙŠØ§Ù…', '5 Ø£ÙŠØ§Ù…', '6 Ø£ÙŠØ§Ù…'], values: [65, 65.5, 66, 66.5, 67, 67.5, 68], price: 68, confidence: 92 },
  month:   { labels: ['Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„'], values: [65, 69], price: 69, confidence: 88 },
  quarter: { labels: ['Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ'], values: [65, 69, 72], price: 72, confidence: 85 }
};

let forecastChart = null;

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø£Ø³Ø¨ÙˆØ¹)
document.addEventListener('DOMContentLoaded', () => {
  const defaultBtn = document.querySelector('.mango-price-forecast .btn.active');
  updateForecast(defaultBtn?.getAttribute('data-period') || 'week', defaultBtn);
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª ÙˆØ±Ø³Ù… Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
function updateForecast(period, btnEl) {
  const data = forecastData[period];
  if (!data) return;

  document.querySelectorAll('.mango-price-forecast .btn').forEach(b => b.classList.remove('active'));
  if (btnEl) btnEl.classList.add('active');

  document.getElementById('forecastPrice').textContent = `${data.price.toFixed(1)} Ø¬Ù†ÙŠÙ‡/ÙƒØ¬Ù…`;
  document.getElementById('forecastConfidence').textContent = `${data.confidence}%`;

  const ctx = document.getElementById('forecastChart').getContext('2d');
  if (forecastChart) forecastChart.destroy();

  forecastChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: data.labels,
      datasets: [{
        label: 'Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹',
        data: data.values,
        borderColor: '#f39c12',
        backgroundColor: 'rgba(243, 156, 18, 0.2)',
        fill: true,
        tension: 0.4,
        pointBackgroundColor: '#e67e22'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false,
          title: { display: true, text: 'Ø¬Ù†ÙŠÙ‡/ÙƒÙŠÙ„Ùˆ' }
        }
      },
      plugins: { legend: { display: false } }
    }
  });
}



</script>

<script>
// Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù„ÙŠÙ„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ø¨Ø¹Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ©
async function fetchRegionalPrices() {
  // Ø§Ø¹ØªÙ…Ø§Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Tridge ÙˆØ­Ø¬Ù… Ø§Ù„ØªØ³Ø¹ÙŠØ± Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ
  const tridgePrice = 65; // EGP/kg :contentReference[oaicite:2]{index=2}

  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ¨Ø¹Ø¯ ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ (Ù…Ø­Ø§ÙƒØ§Ø© Ø¯Ù‚ÙŠÙ‚Ø©)
  const regionalAdjustments = {
    giza: 1.02,
    menofia: 0.98,
    beheira: 1.00
  };

  // Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠ
  const regionalPrices = Object.values(regionalAdjustments).map(adj => tridgePrice * adj);
  const avgRegional = (regionalPrices.reduce((a, b) => a + b, 0) / regionalPrices.length).toFixed(2);
  const expected = (avgRegional * 0.99).toFixed(2); // ØªÙˆÙ‚Ø¹ Ø¨Ø§ÙØªØ±Ø§Ø¶ Ø§Ù†Ø®ÙØ§Ø¶ Ø¨Ù†Ø³Ø¨Ø© 1%

  document.getElementById('avgWeeklyRegionalPrice').textContent = `${avgRegional}â€¯Ø¬`;
  document.getElementById('expectedRegionalPrice').textContent = `${expected}â€¯Ø¬`;
  document.getElementById('regionalPriceInsight').textContent =
    `Ù…Ù† Ù…ØµØ§Ø¯Ø± Ø¯Ø§Ø®Ù„ÙŠØ© + ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ (Tridge + ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ù„ÙŠØ©).`;
}

document.addEventListener('DOMContentLoaded', fetchRegionalPrices);

</script>

<script>
window.onload = function () {
  // âœ… Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù…ÙŠØ© ØªÙ…Ø«Ù‘Ù„ Ù…Ø²Ø§Ø±Ø¹ Ù…Ø§Ù†Ø¬Ùˆ ÙƒÙŠØª
  const mangoKiteData = [
    { name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠÙ Ø§Ù„Ø£Ø®Ø¶Ø±", area: 35, productivity: 14.6 },
    { name: "Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù†Ø§Ø¯Ø±Ø©", area: 42, productivity: 15.8 },
    { name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ÙƒÙŠØª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©", area: 28, productivity: 13.9 },
    { name: "Ù…Ø²Ø§Ø±Ø¹ ÙƒÙŠØª Ø¥ÙƒØ³Ø¨Ø±ÙŠØ³", area: 50, productivity: 16.2 },
    { name: "Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø³Ù‡ÙˆÙ„ Ø§Ù„Ø®ØµØ¨Ø©", area: 40, productivity: 15.0 }
  ];

  const resultsGrid = document.getElementById('resultsGrid');
  const resultsCount = document.getElementById('resultsCount');
  const loadingContainer = document.getElementById('loadingContainer');
  const emptyState = document.getElementById('emptyState');

  // âœ… Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  function displayResults(data) {
    loadingContainer.style.display = "none";
    resultsGrid.innerHTML = "";

    if (data.length === 0) {
      emptyState.style.display = "block";
      resultsCount.textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬";
      return;
    }

    emptyState.style.display = "none";
    resultsCount.textContent = `Ø¹Ø±Ø¶ ${data.length} Ù†ØªÙŠØ¬Ø©`;

    data.forEach((farm) => {
      const card = document.createElement('div');
      card.className = "result-card card text-center p-4";
      card.innerHTML = `
        <div class="text-xl font-bold text-accent-green mb-2">ğŸ¥­ ${farm.name}</div>
        <div class="text-sm text-secondary mb-1">Ø§Ù„Ù…Ø³Ø§Ø­Ø©: <span class="font-semibold">${farm.area}</span> ÙØ¯Ø§Ù†</div>
        <div class="text-sm text-secondary">Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©: <span class="font-semibold">${farm.productivity}</span> Ø·Ù†/ÙØ¯Ø§Ù†</div>
      `;
      resultsGrid.appendChild(card);
    });
  }

  // âœ… ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  function sortResults(criteria) {
    const sorted = [...mangoKiteData].sort((a, b) => {
      if (criteria === "name") return a.name.localeCompare(b.name, 'ar');
      return b[criteria] - a[criteria];
    });
    displayResults(sorted);
  }

  // âœ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ±Ø² Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
  document.querySelectorAll('.sort-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      const sortBy = this.getAttribute('data-sort');
      sortResults(sortBy);
    });
  });

  // âœ… ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
  loadingContainer.style.display = "block";
  setTimeout(() => {
    sortResults("area");
  }, 800);
};
</script>


</body>
</html>